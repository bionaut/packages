{"version":3,"file":"viewport-trap.stories-dab52264.js","sources":["../../../../packages/viewport-trap/src/lib/viewport-trap.tsx"],"sourcesContent":["import React, {\n  useRef,\n  useEffect,\n  FC,\n  PropsWithChildren,\n} from 'react'\n\nexport const ViewportTrap: FC<PropsWithChildren> = ({ children }) => {\n  const wrapperRef = useRef<HTMLDivElement | null>(null)\n  const targetRef = useRef<HTMLDivElement | null>(null)\n\n  useEffect(() => {\n    let animationFrameId: number | null = null\n\n    const checkBounds = () => {\n      if (!wrapperRef.current || !targetRef.current) {\n        return\n      }\n\n\n      const rect = wrapperRef.current.getBoundingClientRect()\n      let translateX = 0\n      let translateY = 0\n\n      const ww = window?.visualViewport?.width || window.innerWidth\n      const wh = window?.visualViewport?.height || window.innerHeight\n\n      if (rect.right > ww) {\n        translateX = ww - rect.right\n      } else if (rect.left < 0) {\n        translateX = -rect.left\n      }\n\n      if (rect.bottom > wh) {\n        translateY = wh - rect.bottom\n      } else if (rect.top < 0) {\n        translateY = -rect.top\n      }\n\n      // update the transform directly instead of using state to avoid\n      // unnecessary re-renders.\n      targetRef.current.style.transform = `translate3d(${translateX}px, ${translateY}px, 0)`\n    }\n\n    const animate = () => {\n      checkBounds()\n      animationFrameId = requestAnimationFrame(animate)\n    }\n\n    animate()\n\n    return () => {\n      if (animationFrameId) {\n        cancelAnimationFrame(animationFrameId)\n      }\n    }\n  }, [])\n\n  return (\n    <div\n      ref={wrapperRef}\n      style={{\n        position: 'relative',\n      }}\n    >\n      <div\n        ref={targetRef}\n        style={{\n          position: 'relative',\n        }}\n      >\n        {children}\n      </div>\n    </div>\n  )\n}\n"],"names":["ViewportTrap","children","wrapperRef","useRef","targetRef","useEffect","animationFrameId","checkBounds","rect","translateX","translateY","ww","_a","wh","_b","animate","jsx"],"mappings":"6FAOO,MAAAA,EAAA,CAAA,CAAA,SAAAC,KAAA,CACL,MAAAC,EAAAC,SAAA,IAAA,EACAC,EAAAD,SAAA,IAAA,EAEAE,OAAAA,EAAAA,UAAA,IAAA,CACE,IAAAC,EAAA,KAEA,MAAAC,EAAA,IAAA,SACE,GAAA,CAAAL,EAAA,SAAA,CAAAE,EAAA,QACE,OAIF,MAAAI,EAAAN,EAAA,QAAA,sBAAA,EACA,IAAAO,EAAA,EACAC,EAAA,EAEA,MAAAC,IAAAC,EAAA,2BAAA,iBAAA,YAAAA,EAAA,QAAA,OAAA,WACAC,IAAAC,EAAA,2BAAA,iBAAA,YAAAA,EAAA,SAAA,OAAA,YAEAN,EAAA,MAAAG,EACEF,EAAAE,EAAAH,EAAA,MAAuBA,EAAA,KAAA,IAEvBC,EAAA,CAAAD,EAAA,MAGFA,EAAA,OAAAK,EACEH,EAAAG,EAAAL,EAAA,OAAuBA,EAAA,IAAA,IAEvBE,EAAA,CAAAF,EAAA,KAKFJ,EAAA,QAAA,MAAA,UAAA,eAAAK,QAAAC,SAAoE,EAGtEK,EAAA,IAAA,CACER,IACAD,EAAA,sBAAAS,CAAA,CAAgD,EAGlD,OAAAA,IAEA,IAAA,CACET,GACE,qBAAAA,CAAA,CACF,CACF,EAAA,CAAA,CAAA,EAGFU,EACE,MAAC,CAAA,IAAAd,EACM,MAAA,CACE,SAAA,UACK,EACZ,SAAAc,EAEA,MAAC,CAAA,IAAAZ,EACM,MAAA,CACE,SAAA,UACK,EACZ,SAAAH,CAEC,CAAA,CACH,CAAA,CAGN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}